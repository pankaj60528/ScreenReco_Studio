{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\r\n  },\r\n);\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBAAO,8OAAC;QAAK,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QAAK,KAAK;QAAM,GAAG,KAAK;;;;;;AAC/F;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/components/ui/switch.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50\",\r\n      className,\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\",\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n));\r\nSwitch.displayName = SwitchPrimitives.Root.displayName;\r\n\r\nexport { Switch };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,uBAAS,mNAAgB,CAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0KAAqB;QACpB,WAAW,IAAA,yHAAE,EACX,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,8OAAC,2KAAsB;YACrB,WAAW,IAAA,yHAAE,EACX;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,0KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst labelVariants = cva(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\");\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\r\n));\r\nLabel.displayName = LabelPrimitive.Root.displayName;\r\n\r\nexport { Label };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EAAC;AAE1B,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAAC,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,iBAAiB;QAAa,GAAG,KAAK;;;;;;AAErF,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW"}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/components/RecordingControls.tsx"],"sourcesContent":[" 'use client';\n\nimport { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Circle, Square, Pause, Play, Mic, MicOff, Monitor } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\n\ninterface RecordingControlsProps {\n  isRecording: boolean;\n  isPaused: boolean;\n  duration: number;\n  onStart: (includeAudio: boolean) => void;\n  onStop: () => void;\n  onPause: () => void;\n  onResume: () => void;\n}\n\nconst formatTime = (seconds: number): string => {\n  const mins = Math.floor(seconds / 60);\n  const secs = seconds % 60;\n  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n};\n\nexport const RecordingControls = ({\n  isRecording,\n  isPaused,\n  duration,\n  onStart,\n  onStop,\n  onPause,\n  onResume,\n}: RecordingControlsProps) => {\n  const [includeAudio, setIncludeAudio] = useState(true);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"glass-card p-8\"\n    >\n      <div className=\"flex flex-col items-center gap-6\">\n        {/* Timer Display */}\n        <AnimatePresence mode=\"wait\">\n          {isRecording && (\n            <motion.div\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.8 }}\n              className=\"flex items-center gap-3\"\n            >\n              <motion.div\n                animate={{ opacity: isPaused ? 0.5 : [1, 0.5, 1] }}\n                transition={{ duration: 1.5, repeat: isPaused ? 0 : Infinity }}\n                className=\"w-3 h-3 rounded-full bg-destructive\"\n              />\n              <span className=\"font-mono text-4xl font-medium text-foreground\">\n                {formatTime(duration)}\n              </span>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Audio Toggle - Only show when not recording */}\n        {!isRecording && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"flex items-center gap-3 p-4 rounded-lg bg-secondary/50\"\n          >\n            {includeAudio ? (\n              <Mic className=\"w-5 h-5 text-primary\" />\n            ) : (\n              <MicOff className=\"w-5 h-5 text-muted-foreground\" />\n            )}\n            <Label htmlFor=\"audio-toggle\" className=\"text-sm font-medium\">\n              Include Microphone\n            </Label>\n            <Switch\n              id=\"audio-toggle\"\n              checked={includeAudio}\n              onCheckedChange={setIncludeAudio}\n            />\n          </motion.div>\n        )}\n\n        {/* Control Buttons */}\n        <div className=\"flex items-center gap-4\">\n          {!isRecording ? (\n            <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n              <Button\n                size=\"lg\"\n                className=\"h-16 px-8 text-lg font-semibold bg-destructive hover:bg-destructive/90 glow-effect\"\n                onClick={() => onStart(includeAudio)}\n              >\n                <Circle className=\"w-6 h-6 mr-3 fill-current\" />\n                Start Recording\n              </Button>\n            </motion.div>\n          ) : (\n            <>\n              <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n                <Button\n                  size=\"lg\"\n                  variant=\"secondary\"\n                  className=\"h-14 px-6\"\n                  onClick={isPaused ? onResume : onPause}\n                >\n                  {isPaused ? (\n                    <>\n                      <Play className=\"w-5 h-5 mr-2\" />\n                      Resume\n                    </>\n                  ) : (\n                    <>\n                      <Pause className=\"w-5 h-5 mr-2\" />\n                      Pause\n                    </>\n                  )}\n                </Button>\n              </motion.div>\n              <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n                <Button\n                  size=\"lg\"\n                  className=\"h-14 px-6 bg-primary hover:bg-primary/90\"\n                  onClick={onStop}\n                >\n                  <Square className=\"w-5 h-5 mr-2 fill-current\" />\n                  Stop Recording\n                </Button>\n              </motion.div>\n            </>\n          )}\n        </div>\n\n        {/* Instructions */}\n        {!isRecording && (\n          <motion.p\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.2 }}\n            className=\"flex items-center gap-2 text-sm text-muted-foreground\"\n          >\n            <Monitor className=\"w-4 h-4\" />\n            Select a screen, window, or tab to record\n          </motion.p>\n        )}\n      </div>\n    </motion.div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/components/ui/slider.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as SliderPrimitive from \"@radix-ui/react-slider\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Slider = React.forwardRef<\r\n  React.ElementRef<typeof SliderPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SliderPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative flex w-full touch-none select-none items-center\", className)}\r\n    {...props}\r\n  >\r\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\r\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\r\n    </SliderPrimitive.Track>\r\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\r\n  </SliderPrimitive.Root>\r\n));\r\nSlider.displayName = SliderPrimitive.Root.displayName;\r\n\r\nexport { Slider };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,uBAAS,mNAAgB,CAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,4DAA4D;QACzE,GAAG,KAAK;;0BAET,8OAAC,2KAAqB;gBAAC,WAAU;0BAC/B,cAAA,8OAAC,2KAAqB;oBAAC,WAAU;;;;;;;;;;;0BAEnC,8OAAC,2KAAqB;gBAAC,WAAU;;;;;;;;;;;;AAGrC,OAAO,WAAW,GAAG,0KAAoB,CAAC,WAAW"}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Select = SelectPrimitive.Root;\r\n\r\nconst SelectGroup = SelectPrimitive.Group;\r\n\r\nconst SelectValue = SelectPrimitive.Value;\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n));\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n));\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n));\r\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className,\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\",\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n));\r\nSelectContent.displayName = SelectPrimitive.Content.displayName;\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label ref={ref} className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)} {...props} />\r\n));\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n));\r\nSelectItem.displayName = SelectPrimitive.Item.displayName;\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator ref={ref} className={cn(\"-mx-1 my-1 h-px bg-muted\", className)} {...props} />\r\n));\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,mOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,mNAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,8OAAC,6NAAS;YAAC,WAAU;;;;;;;;;;;AAGzB,qBAAqB,WAAW,GAAG,oLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,8OAAC,mOAAW;YAAC,WAAU;;;;;;;;;;;AAG3B,uBAAuB,WAAW,GAAG,sLAAgC,CAAC,WAAW;AAEjF,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,KAAK;YACL,WAAW,IAAA,yHAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8OAAC;;;;;8BACD,8OAAC,8KAAwB;oBACvB,WAAW,IAAA,yHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QAAC,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,0CAA0C;QAAa,GAAG,KAAK;;;;;;AAEhH,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mLAA6B;8BAC5B,cAAA,8OAAC,6MAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,8OAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,+KAAyB;QAAC,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,4BAA4B;QAAa,GAAG,KAAK;;;;;;AAEtG,gBAAgB,WAAW,GAAG,+KAAyB,CAAC,WAAW"}},
    {"offset": {"line": 703, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/hooks/useVideoTrimmer.ts"],"sourcesContent":["import { useState, useCallback } from 'react';\nimport { FFmpeg } from '@ffmpeg/ffmpeg';\nimport { fetchFile, toBlobURL } from '@ffmpeg/util';\n\nexport interface TrimState {\n  isLoading: boolean;\n  isProcessing: boolean;\n  progress: number;\n  error: string | null;\n}\n\nexport interface UseVideoTrimmerReturn {\n  state: TrimState;\n  loadFFmpeg: () => Promise<boolean>;\n  trimVideo: (\n    videoBlob: Blob,\n    startTime: number,\n    endTime: number,\n    format: 'webm' | 'mp4'\n  ) => Promise<Blob | null>;\n  isLoaded: boolean;\n}\n\nlet ffmpegInstance: FFmpeg | null = null;\n\nexport const useVideoTrimmer = (): UseVideoTrimmerReturn => {\n  const [state, setState] = useState<TrimState>({\n    isLoading: false,\n    isProcessing: false,\n    progress: 0,\n    error: null,\n  });\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  const loadFFmpeg = useCallback(async (): Promise<boolean> => {\n    if (isLoaded && ffmpegInstance) return true;\n\n    setState(prev => ({ ...prev, isLoading: true, error: null, progress: 0 }));\n\n    try {\n      const ffmpeg = new FFmpeg();\n\n      ffmpeg.on('progress', ({ progress }) => {\n        const progressPercent = Math.max(1, Math.min(100, Math.round(progress * 100)));\n        console.log('FFmpeg progress:', progressPercent + '%');\n        setState(prev => ({ ...prev, progress: progressPercent }));\n      });\n\n      // Load ffmpeg with CDN URLs - try multiple CDNs for reliability\n      const baseUrls = [\n        'https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd',\n        'https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/umd',\n        'https://cdnjs.cloudflare.com/ajax/libs/ffmpeg-core/0.12.6/dist/umd'\n      ];\n      \n      let loaded = false;\n      let lastError: Error | null = null;\n      \n      for (const baseURL of baseUrls) {\n        try {\n          console.log(`Trying to load FFmpeg from: ${baseURL}`);\n          setState(prev => ({ ...prev, progress: 10 }));\n          \n          await ffmpeg.load({\n            coreURL: await toBlobURL(`${baseURL}/ffmpeg-core.js`, 'text/javascript'),\n            wasmURL: await toBlobURL(`${baseURL}/ffmpeg-core.wasm`, 'application/wasm'),\n          });\n          \n          loaded = true;\n          setState(prev => ({ ...prev, progress: 100 }));\n          console.log('FFmpeg loaded successfully from:', baseURL);\n          break;\n        } catch (err) {\n          lastError = err instanceof Error ? err : new Error('Unknown FFmpeg load error');\n          console.warn(`Failed to load FFmpeg from ${baseURL}:`, lastError);\n          setState(prev => ({ ...prev, progress: 0 }));\n          continue;\n        }\n      }\n      \n      if (!loaded) {\n        throw lastError || new Error('Failed to load FFmpeg from any CDN');\n      }\n\n      ffmpegInstance = ffmpeg;\n      setIsLoaded(true);\n      setState(prev => ({ ...prev, isLoading: false, progress: 0 }));\n      return true;\n    } catch (err) {\n      const error = err instanceof Error ? err.message : 'Failed to load video processor';\n      setState(prev => ({ ...prev, isLoading: false, progress: 0, error }));\n      console.error('FFmpeg load error:', err);\n      return false;\n    }\n  }, [isLoaded]);\n\n  const trimVideo = useCallback(async (\n    videoBlob: Blob,\n    startTime: number,\n    endTime: number,\n    format: 'webm' | 'mp4'\n  ): Promise<Blob | null> => {\n    if (!ffmpegInstance) {\n      setState(prev => ({ ...prev, error: 'Video processor not loaded' }));\n      return null;\n    }\n\n    if (!videoBlob || videoBlob.size === 0) {\n      setState(prev => ({ ...prev, error: 'Invalid video input' }));\n      return null;\n    }\n\n    const safeStart = Math.max(0, startTime || 0);\n    const safeEnd = Math.max(safeStart, endTime || 0);\n    const duration = safeEnd - safeStart;\n\n    if (!isFinite(duration) || isNaN(duration) || duration <= 0.05) {\n      setState(prev => ({ ...prev, error: 'Invalid trim range' }));\n      return null;\n    }\n\n    setState(prev => ({ ...prev, isProcessing: true, progress: 0, error: null }));\n\n    try {\n      const inputFile = 'input.webm';\n      const outputFile = format === 'mp4' ? 'output.mp4' : 'output.webm';\n\n      console.log('Starting video trim:', { startTime: safeStart, endTime: safeEnd, duration, format, videoBlobSize: videoBlob.size });\n\n      try { await ffmpegInstance.deleteFile(inputFile); } catch {}\n      try { await ffmpegInstance.deleteFile(outputFile); } catch {}\n\n      await ffmpegInstance.writeFile(inputFile, await fetchFile(videoBlob));\n\n      const startStr = safeStart.toFixed(3);\n      const durStr = duration.toFixed(3);\n\n      let args: string[];\n\n      if (format === 'webm') {\n        args = [\n          '-ss', startStr,\n          '-t', durStr,\n          '-i', inputFile,\n          '-map', '0',\n          '-c', 'copy',\n          '-fflags', '+genpts',\n          '-avoid_negative_ts', 'make_zero',\n          '-reset_timestamps', '1',\n          outputFile,\n        ];\n\n        try {\n          console.log('FFmpeg command:', args.join(' '));\n          await ffmpegInstance.exec(args);\n        } catch (copyErr) {\n          console.warn('Copy trim failed, falling back to re-encode:', copyErr);\n          args = [\n            '-ss', startStr,\n            '-t', durStr,\n            '-i', inputFile,\n            '-c:v', 'libvpx',\n            '-b:v', '1M',\n            '-c:a', 'libopus',\n            '-b:a', '128k',\n            '-deadline', 'realtime',\n            '-cpu-used', '4',\n            '-avoid_negative_ts', 'make_zero',\n            outputFile,\n          ];\n          console.log('FFmpeg command:', args.join(' '));\n          await ffmpegInstance.exec(args);\n        }\n      } else {\n        args = [\n          '-ss', startStr,\n          '-t', durStr,\n          '-i', inputFile,\n          '-c:v', 'libx264',\n          '-preset', 'veryfast',\n          '-crf', '28',\n          '-pix_fmt', 'yuv420p',\n          '-c:a', 'aac',\n          '-b:a', '128k',\n          '-movflags', '+faststart',\n          '-avoid_negative_ts', 'make_zero',\n          outputFile,\n        ];\n\n        try {\n          console.log('FFmpeg command:', args.join(' '));\n          await ffmpegInstance.exec(args);\n        } catch (mp4Err) {\n          console.warn('MP4 encode failed, falling back to mpeg4:', mp4Err);\n          args = [\n            '-ss', startStr,\n            '-t', durStr,\n            '-i', inputFile,\n            '-c:v', 'mpeg4',\n            '-q:v', '5',\n            '-c:a', 'aac',\n            '-b:a', '128k',\n            '-movflags', '+faststart',\n            '-avoid_negative_ts', 'make_zero',\n            outputFile,\n          ];\n          console.log('FFmpeg command:', args.join(' '));\n          await ffmpegInstance.exec(args);\n        }\n      }\n\n      console.log('FFmpeg processing completed');\n\n      // Read output file\n      const data = await ffmpegInstance.readFile(outputFile);\n      const mimeType = format === 'mp4' ? 'video/mp4' : 'video/webm';\n      \n      // Create blob from the file data - handle both Uint8Array and string returns\n      let blobData: Uint8Array;\n      if (typeof data === 'string') {\n        // Convert base64 string to Uint8Array if needed\n        const binaryString = atob(data);\n        blobData = new Uint8Array(binaryString.length);\n        for (let i = 0; i < binaryString.length; i++) {\n          blobData[i] = binaryString.charCodeAt(i);\n        }\n      } else {\n        blobData = new Uint8Array(data);\n      }\n      \n      const trimmedBlob = new Blob([blobData as BlobPart], { type: mimeType });\n      console.log('Trimmed blob created:', { size: trimmedBlob.size, type: trimmedBlob.type });\n\n      setState(prev => ({ ...prev, isProcessing: false, progress: 100 }));\n      return trimmedBlob;\n    } catch (err) {\n      const error = err instanceof Error ? err.message : 'Failed to process video';\n      setState(prev => ({ ...prev, isProcessing: false, error }));\n      console.error('Trim error:', err);\n      return null;\n    } finally {\n      try { await ffmpegInstance.deleteFile('input.webm'); } catch {}\n      try { await ffmpegInstance.deleteFile('output.webm'); } catch {}\n      try { await ffmpegInstance.deleteFile('output.mp4'); } catch {}\n    }\n  }, []);\n\n  return {\n    state,\n    loadFFmpeg,\n    trimVideo,\n    isLoaded,\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1022, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/components/VideoTrimmer.tsx"],"sourcesContent":[" 'use client';\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { Scissors, Download, Loader2, AlertCircle } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Slider } from '@/components/ui/slider';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { useVideoTrimmer } from '@/hooks/useVideoTrimmer';\n\ninterface VideoTrimmerProps {\n  videoBlob: Blob;\n  onTrimComplete: (trimmedBlob: Blob, format: 'webm' | 'mp4', trimStart: number, trimEnd: number) => void;\n  onSkip: () => void;\n}\n\nconst formatTime = (seconds: number): string => {\n  if (isNaN(seconds) || !isFinite(seconds)) {\n    return '00:00.0';\n  }\n  const mins = Math.floor(seconds / 60);\n  const secs = Math.floor(seconds % 60);\n  const ms = Math.floor((seconds % 1) * 10);\n  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}.${ms}`;\n};\n\nexport const VideoTrimmer = ({ videoBlob, onTrimComplete, onSkip }: VideoTrimmerProps) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [trimRange, setTrimRange] = useState<[number, number]>([0, 10]); // Default 10 seconds\n  const [currentTime, setCurrentTime] = useState(0);\n  const [format, setFormat] = useState<'webm' | 'mp4'>('webm');\n  const [videoUrl, setVideoUrl] = useState<string>('');\n  const [videoDuration, setVideoDuration] = useState(0); // Added this back\n  const [isDurationReady, setIsDurationReady] = useState(false);\n  const [hasInitializedRange, setHasInitializedRange] = useState(false);\n  const { state, loadFFmpeg, trimVideo, isLoaded } = useVideoTrimmer();\n\n  // Simple approach - create video URL and set trim range\n  useEffect(() => {\n    if (videoBlob && videoBlob.size > 0) {\n      const url = URL.createObjectURL(videoBlob);\n      setVideoUrl(url);\n\n      setCurrentTime(0);\n      setTrimRange([0, 0]);\n      setVideoDuration(0);\n      setIsDurationReady(false);\n      setHasInitializedRange(false);\n\n      return () => {\n        URL.revokeObjectURL(url);\n      };\n    }\n  }, [videoBlob]);\n\n  const handleTimeUpdate = useCallback(() => {\n    if (videoRef.current) {\n      setCurrentTime(videoRef.current.currentTime);\n    }\n  }, []);\n\n  const handleLoadedMetadata = useCallback(() => {\n    const v = videoRef.current;\n    if (!v) return;\n\n    const d = v.duration;\n    if (!isFinite(d) || isNaN(d) || d <= 0) {\n      return;\n    }\n\n    setVideoDuration(d);\n    setIsDurationReady(true);\n\n    if (!hasInitializedRange) {\n      setTrimRange([0, d]);\n      setHasInitializedRange(true);\n    }\n  }, [hasInitializedRange]);\n\n  const handleDurationChange = useCallback(() => {\n    const v = videoRef.current;\n    if (!v) return;\n\n    const d = v.duration;\n    if (!isFinite(d) || isNaN(d) || d <= 0) {\n      return;\n    }\n\n    setVideoDuration(d);\n    setIsDurationReady(true);\n\n    if (!hasInitializedRange) {\n      setTrimRange([0, d]);\n      setHasInitializedRange(true);\n    }\n  }, [hasInitializedRange]);\n\n  const handleRangeChange = useCallback((values: number[]) => {\n    if (!isDurationReady || videoDuration <= 0) return;\n\n    const start = Math.max(0, Math.min(values[0], videoDuration));\n    const end = Math.max(start, Math.min(values[1], videoDuration));\n    setTrimRange([start, end]);\n\n    // Only set currentTime if video is ready and value is valid\n    if (videoRef.current && isFinite(start) && start >= 0) {\n      try {\n        videoRef.current.currentTime = start;\n      } catch (error) {\n        console.warn('Failed to set currentTime:', error);\n      }\n    }\n  }, [isDurationReady, videoDuration]);\n\n  const handleTrim = async () => {\n    // Try FFmpeg first\n    if (!isLoaded) {\n      const loaded = await loadFFmpeg();\n      if (!loaded) {\n        // If FFmpeg fails, offer to use original video\n        if (confirm('Video processor failed to load. Would you like to use the original video without trimming?')) {\n          onTrimComplete(videoBlob, 'webm', 0, videoDuration || trimRange[1] || 0);\n        }\n        return;\n      }\n    }\n\n    const trimmedBlob = await trimVideo(\n      videoBlob,\n      trimRange[0],\n      trimRange[1],\n      format\n    );\n\n    if (trimmedBlob) {\n      onTrimComplete(trimmedBlob, format, trimRange[0], trimRange[1]);\n    } else {\n      // If trimming fails, offer to use original video\n      if (confirm('Video trimming failed. Would you like to use the original video without trimming?')) {\n        onTrimComplete(videoBlob, 'webm', 0, videoDuration || trimRange[1] || 0);\n      }\n    }\n  };\n\n  const handleDownloadOriginal = () => {\n    const url = URL.createObjectURL(videoBlob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `recording-${Date.now()}.webm`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"glass-card p-6 space-y-6\"\n    >\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-xl font-semibold flex items-center gap-2\">\n          <Scissors className=\"w-5 h-5 text-primary\" />\n          Trim Video\n        </h2>\n        <Button variant=\"ghost\" size=\"sm\" onClick={onSkip}>\n          Skip Trimming\n        </Button>\n      </div>\n\n      {/* Video Preview */}\n      <div className=\"video-container\">\n        {videoUrl ? (\n          <video\n            ref={videoRef}\n            src={videoUrl}\n            controls\n            preload=\"metadata\"\n            onLoadedMetadata={handleLoadedMetadata}\n            onDurationChange={handleDurationChange}\n            onTimeUpdate={handleTimeUpdate}\n            className=\"w-full aspect-video object-contain bg-black rounded-lg\"\n          />\n        ) : (\n          <div className=\"w-full aspect-video rounded-lg bg-secondary flex items-center justify-center\">\n            <div className=\"text-center\">\n              <Loader2 className=\"w-12 h-12 mx-auto mb-2 animate-spin text-primary\" />\n              <p className=\"text-sm text-muted-foreground\">Loading video...</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Timeline */}\n      <div className=\"space-y-4\">\n        {!isDurationReady || videoDuration <= 0 ? (\n          <div className=\"flex items-center justify-center text-sm text-muted-foreground font-mono\">\n            Loading duration...\n          </div>\n        ) : (\n          <>\n            <div className=\"text-center text-sm text-muted-foreground font-mono\">\n              Time Range: {formatTime(trimRange[0])} - {formatTime(trimRange[1])}\n              <div className=\"text-xs mt-1\">\n                Video Length: {formatTime(videoDuration)}\n              </div>\n            </div>\n\n            <div className=\"px-2\">\n              <Slider\n                value={trimRange}\n                min={0}\n                max={videoDuration}\n                step={0.1}\n                onValueChange={handleRangeChange}\n                className=\"cursor-pointer\"\n              />\n            </div>\n          </>\n        )}\n\n        {/* Current playhead indicator */}\n        <div className=\"relative h-1 bg-secondary rounded-full overflow-hidden\">\n          <div\n            className=\"absolute h-full bg-primary/50 transition-all duration-100\"\n            style={{\n              left: `${(trimRange[0] / (isDurationReady && videoDuration > 0 ? videoDuration : 1)) * 100}%`,\n              width: `${((trimRange[1] - trimRange[0]) / (isDurationReady && videoDuration > 0 ? videoDuration : 1)) * 100}%`,\n            }}\n          />\n          <div\n            className=\"absolute w-1 h-full bg-primary\"\n            style={{ left: `${(currentTime / (isDurationReady && videoDuration > 0 ? videoDuration : 1)) * 100}%` }}\n          />\n        </div>\n      </div>\n\n      {/* Export Options */}\n      <div className=\"flex items-center gap-4\">\n        <div className=\"flex-1\">\n          <Label htmlFor=\"format\" className=\"text-sm text-muted-foreground mb-2 block\">\n            Export Format\n          </Label>\n          <Select value={format} onValueChange={(v) => setFormat(v as 'webm' | 'mp4')}>\n            <SelectTrigger id=\"format\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"webm\">WebM (Fast)</SelectItem>\n              <SelectItem value=\"mp4\">MP4 (Universal)</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      {/* Error Display */}\n      {state.error && (\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center gap-2 p-3 rounded-lg bg-destructive/10 text-destructive text-sm\">\n            <AlertCircle className=\"w-4 h-4\" />\n            {state.error}\n          </div>\n          <Button \n            onClick={() => loadFFmpeg()} \n            variant=\"outline\" \n            size=\"sm\" \n            className=\"w-full\"\n          >\n            <Loader2 className=\"w-4 h-4 mr-2\" />\n            Retry Loading Video Processor\n          </Button>\n        </div>\n      )}\n\n      {/* Progress */}\n      {(state.isLoading || state.isProcessing) && (\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\n            {state.isLoading ? 'Loading video processor...' : `Processing... ${state.progress}%`}\n          </div>\n          <div className=\"h-2 bg-secondary rounded-full overflow-hidden\">\n            <div\n              className=\"h-full bg-primary transition-all duration-300\"\n              style={{ width: `${state.progress}%` }}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Actions */}\n      <div className=\"flex items-center gap-3 pt-2\">\n        <Button\n          variant=\"secondary\"\n          onClick={handleDownloadOriginal}\n          className=\"flex-1\"\n        >\n          <Download className=\"w-4 h-4 mr-2\" />\n          Download Original\n        </Button>\n        <Button \n          onClick={handleTrim} \n          disabled={state.isProcessing}\n          className=\"w-full\"\n        >\n          {state.isProcessing ? (\n            <>\n              <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n              Processing {state.progress}%\n            </>\n          ) : (\n            <>\n              <Scissors className=\"w-4 h-4 mr-2\" />\n              Trim & Export\n            </>\n          )}\n        </Button>\n      </div>\n    </motion.div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1607, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className,\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,yHAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 1635, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/components/UploadShare.tsx"],"sourcesContent":[" 'use client';\n\nimport { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Upload, Link2, Copy, Check, Loader2, Share2, ExternalLink } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { toast } from 'sonner';\nimport type { VideoRecord } from '@/lib/db';\n\ninterface UploadShareProps {\n  videoBlob: Blob;\n  format: 'webm' | 'mp4';\n  duration: number;\n  trimStart?: number;\n  trimEnd?: number;\n  onComplete: (video: VideoRecord) => void;\n}\n\nexport const UploadShare = ({\n  videoBlob,\n  format,\n  duration,\n  trimStart,\n  trimEnd,\n  onComplete,\n}: UploadShareProps) => {\n  const [title, setTitle] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [shareUrl, setShareUrl] = useState<string | null>(null);\n  const [copied, setCopied] = useState(false);\n\n  const handleUpload = async () => {\n    if (!title.trim()) {\n      toast.error('Please enter a title for your video');\n      return;\n    }\n\n    setIsUploading(true);\n    setUploadProgress(20);\n\n    try {\n      const filename = `${title.replace(/[^a-zA-Z0-9]/g, '-') || 'recording'}.${format}`;\n      const formData = new FormData();\n      formData.append('file', videoBlob, filename);\n      formData.append('title', title);\n      formData.append('duration', duration.toString());\n      if (trimStart !== undefined) formData.append('trimStart', trimStart.toString());\n      if (trimEnd !== undefined) formData.append('trimEnd', trimEnd.toString());\n\n      setUploadProgress(50);\n      const response = await fetch('/api/upload', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        const errorMessage = errorData.error || `Upload failed (${response.status})`;\n        throw new Error(errorMessage);\n      }\n\n      const data = await response.json() as { video: VideoRecord; shareUrl: string };\n      setUploadProgress(100);\n      const computedShareUrl = data?.video?.shareId\n        ? `${window.location.origin}/watch/${data.video.shareId}`\n        : data.shareUrl;\n      setShareUrl(computedShareUrl);\n      toast.success('Video uploaded successfully!');\n      onComplete(data.video);\n    } catch (err) {\n      console.error('Upload error:', err);\n      toast.error('Failed to upload video. Please try again.');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const copyToClipboard = async () => {\n    if (!shareUrl) return;\n    \n    try {\n      await navigator.clipboard.writeText(shareUrl);\n      setCopied(true);\n      toast.success('Link copied to clipboard!');\n      setTimeout(() => setCopied(false), 2000);\n    } catch {\n      toast.error('Failed to copy link');\n    }\n  };\n\n  const openShareUrl = () => {\n    if (shareUrl) {\n      window.open(shareUrl, '_blank');\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"glass-card p-6 space-y-6\"\n    >\n      <div className=\"flex items-center gap-2\">\n        <Upload className=\"w-5 h-5 text-primary\" />\n        <h2 className=\"text-xl font-semibold\">Upload & Share</h2>\n      </div>\n\n      {!shareUrl ? (\n        <>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Video Title</Label>\n            <Input\n              id=\"title\"\n              placeholder=\"Give your recording a name...\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              disabled={isUploading}\n              className=\"bg-secondary/50 border-border\"\n            />\n          </div>\n\n          <div className=\"text-sm text-muted-foreground space-y-1\">\n            <p>Format: {format.toUpperCase()}</p>\n            <p>Size: {(videoBlob.size / (1024 * 1024)).toFixed(2)} MB</p>\n            <p>Duration: {Math.round(duration)}s</p>\n          </div>\n\n          {isUploading && (\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Uploading...\n              </div>\n              <div className=\"h-2 bg-secondary rounded-full overflow-hidden\">\n                <motion.div\n                  className=\"h-full bg-primary\"\n                  initial={{ width: 0 }}\n                  animate={{ width: `${uploadProgress}%` }}\n                  transition={{ duration: 0.3 }}\n                />\n              </div>\n            </div>\n          )}\n\n          <Button\n            onClick={handleUpload}\n            disabled={isUploading || !title.trim()}\n            className=\"w-full bg-primary hover:bg-primary/90\"\n            size=\"lg\"\n          >\n            {isUploading ? (\n              <>\n                <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                Uploading...\n              </>\n            ) : (\n              <>\n                <Upload className=\"w-4 h-4 mr-2\" />\n                Upload Video\n              </>\n            )}\n          </Button>\n        </>\n      ) : (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"space-y-4\"\n        >\n          <div className=\"p-4 rounded-lg bg-success/10 border border-success/20\">\n            <div className=\"flex items-center gap-2 text-success mb-2\">\n              <Check className=\"w-5 h-5\" />\n              <span className=\"font-medium\">Video uploaded successfully!</span>\n            </div>\n            <p className=\"text-sm text-muted-foreground\">\n              Your video is now available at the link below\n            </p>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>Share Link</Label>\n            <div className=\"flex gap-2\">\n              <Input\n                value={shareUrl}\n                readOnly\n                className=\"bg-secondary/50 border-border font-mono text-sm\"\n              />\n              <Button\n                variant=\"secondary\"\n                size=\"icon\"\n                onClick={copyToClipboard}\n                className=\"shrink-0\"\n              >\n                {copied ? (\n                  <Check className=\"w-4 h-4 text-success\" />\n                ) : (\n                  <Copy className=\"w-4 h-4\" />\n                )}\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <Button\n              variant=\"secondary\"\n              onClick={copyToClipboard}\n              className=\"flex-1\"\n            >\n              <Link2 className=\"w-4 h-4 mr-2\" />\n              Copy Link\n            </Button>\n            <Button\n              onClick={openShareUrl}\n              className=\"flex-1 bg-primary hover:bg-primary/90\"\n            >\n              <ExternalLink className=\"w-4 h-4 mr-2\" />\n              Open Video\n            </Button>\n          </div>\n        </motion.div>\n      )}\n    </motion.div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2081, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/src/hooks/useScreenRecorder.ts"],"sourcesContent":["import { useState, useRef, useCallback } from 'react';\n\nexport interface RecordingState {\n  isRecording: boolean;\n  isPaused: boolean;\n  duration: number;\n  error: string | null;\n}\n\nexport interface UseScreenRecorderReturn {\n  state: RecordingState;\n  startRecording: (includeAudio: boolean) => Promise<void>;\n  stopRecording: () => Promise<Blob | null>;\n  pauseRecording: () => void;\n  resumeRecording: () => void;\n  previewStream: MediaStream | null;\n}\n\nexport const useScreenRecorder = (): UseScreenRecorderReturn => {\n  const [state, setState] = useState<RecordingState>({\n    isRecording: false,\n    isPaused: false,\n    duration: 0,\n    error: null,\n  });\n\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const chunksRef = useRef<Blob[]>([]);\n  const streamRef = useRef<MediaStream | null>(null);\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n  const [previewStream, setPreviewStream] = useState<MediaStream | null>(null);\n\n  const startTimer = useCallback(() => {\n    timerRef.current = setInterval(() => {\n      setState(prev => ({ ...prev, duration: prev.duration + 1 }));\n    }, 1000);\n  }, []);\n\n  const stopTimer = useCallback(() => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  }, []);\n\n  const startRecording = useCallback(async (includeAudio: boolean) => {\n    try {\n      setState(prev => ({ ...prev, error: null, duration: 0 }));\n      chunksRef.current = [];\n\n      // Get screen stream\n      const screenStream = await navigator.mediaDevices.getDisplayMedia({\n        // NOTE: keep constraints broadly compatible across Chrome/Edge/Firefox.\n        // `displaySurface` is not a widely-supported constraint and can throw NotSupportedError.\n        video: {\n          frameRate: { ideal: 30, max: 60 },\n        },\n        audio: false,\n      });\n\n      let combinedStream = screenStream;\n\n      // Get audio stream if requested\n      if (includeAudio) {\n        try {\n          const audioStream = await navigator.mediaDevices.getUserMedia({\n            audio: {\n              echoCancellation: true,\n              noiseSuppression: true,\n            },\n          });\n\n          // Combine video and audio tracks\n          const tracks = [\n            ...screenStream.getVideoTracks(),\n            ...audioStream.getAudioTracks(),\n          ];\n          combinedStream = new MediaStream(tracks);\n        } catch (audioErr) {\n          console.warn('Could not get audio stream:', audioErr);\n        }\n      }\n\n      streamRef.current = combinedStream;\n      setPreviewStream(combinedStream);\n\n      // Set up MediaRecorder with maximum compatibility\n      const possibleMimeTypes = [\n        'video/webm',                   // Basic webm - most compatible\n        'video/webm;codecs=vp8',        // VP8 codec\n        'video/webm;codecs=vp9',       // VP9 codec\n        'video/mp4',                    // MP4 fallback\n        'video/webm;codecs=h264'       // H264 in webm\n      ];\n      \n      let selectedMimeType = 'video/webm';\n      for (const type of possibleMimeTypes) {\n        if (MediaRecorder.isTypeSupported(type)) {\n          selectedMimeType = type;\n          console.log('Using MIME type:', selectedMimeType);\n          break;\n        }\n      }\n\n      // Force basic webm if nothing else works\n      if (!MediaRecorder.isTypeSupported(selectedMimeType)) {\n        selectedMimeType = 'video/webm';\n        console.log('Falling back to basic webm');\n      }\n\n      console.log('Final selected MIME type:', selectedMimeType);\n\n      const mediaRecorder = new MediaRecorder(combinedStream, {\n        mimeType: selectedMimeType,\n        videoBitsPerSecond: 1500000, // Lower bitrate for better compatibility\n      });\n\n      let totalSize = 0;\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data && event.data.size > 0) {\n          chunksRef.current.push(event.data);\n          totalSize += event.data.size;\n          console.log(`Chunk received: ${event.data.size} bytes, total: ${totalSize} bytes, type: ${event.data.type}`);\n        }\n      };\n\n      // Handle screen share ending\n      screenStream.getVideoTracks()[0].onended = () => {\n        stopRecording();\n      };\n\n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.start(1000); // Capture every second\n\n      // Store mimeType for use in onstop callback\n      (mediaRecorderRef.current as any)._mimeType = selectedMimeType;\n\n      setState(prev => ({ ...prev, isRecording: true }));\n      startTimer();\n    } catch (err) {\n      const error = err instanceof Error ? err.message : 'Failed to start recording';\n      setState(prev => ({ ...prev, error }));\n      console.error('Recording error:', err);\n    }\n  }, [startTimer]);\n\n  const stopRecording = useCallback(async (): Promise<Blob | null> => {\n    return new Promise((resolve) => {\n      stopTimer();\n\n      if (!mediaRecorderRef.current || mediaRecorderRef.current.state === 'inactive') {\n        setState(prev => ({ ...prev, isRecording: false, isPaused: false }));\n        resolve(null);\n        return;\n      }\n\n      mediaRecorderRef.current.onstop = () => {\n        console.log(`Recording stopped. Total chunks: ${chunksRef.current.length}`);\n        \n        if (chunksRef.current.length === 0) {\n          console.error('No video data recorded');\n          setState(prev => ({ ...prev, error: 'No video data was recorded. Please try again.' }));\n          resolve(null);\n          return;\n        }\n\n        const recordedMimeType = (mediaRecorderRef.current as any)._mimeType || 'video/webm';\n        \n        // Ensure chunks have actual data\n        const validChunks = chunksRef.current.filter(chunk => chunk && chunk.size > 0);\n        console.log(`Valid chunks: ${validChunks.length}/${chunksRef.current.length}`);\n        \n        if (validChunks.length === 0) {\n          console.error('No valid video data recorded');\n          setState(prev => ({ ...prev, error: 'No video data was recorded. Please try again.' }));\n          resolve(null);\n          return;\n        }\n\n        const blob = new Blob(validChunks, { type: recordedMimeType });\n        console.log(`Blob created: ${blob.size} bytes, type: ${blob.type}, chunks: ${validChunks.length}`);\n        \n        // Validate the blob\n        if (blob.size === 0) {\n          console.error('Empty blob created despite having chunks');\n          setState(prev => ({ ...prev, error: 'Recording failed - empty video file created.' }));\n          resolve(null);\n          return;\n        }\n        \n        // Additional validation - check if blob is readable\n        try {\n          const testUrl = URL.createObjectURL(blob);\n          console.log('Blob validation: URL created successfully');\n          URL.revokeObjectURL(testUrl);\n        } catch (blobError) {\n          console.error('Blob validation failed:', blobError);\n          setState(prev => ({ ...prev, error: 'Recording failed - invalid video file created.' }));\n          resolve(null);\n          return;\n        }\n        \n        // Stop all tracks\n        streamRef.current?.getTracks().forEach(track => track.stop());\n        streamRef.current = null;\n        setPreviewStream(null);\n        \n        setState(prev => ({ ...prev, isRecording: false, isPaused: false }));\n        resolve(blob);\n      };\n\n      mediaRecorderRef.current.stop();\n    });\n  }, [stopTimer]);\n\n  const pauseRecording = useCallback(() => {\n    if (mediaRecorderRef.current?.state === 'recording') {\n      mediaRecorderRef.current.pause();\n      stopTimer();\n      setState(prev => ({ ...prev, isPaused: true }));\n    }\n  }, [stopTimer]);\n\n  const resumeRecording = useCallback(() => {\n    if (mediaRecorderRef.current?.state === 'paused') {\n      mediaRecorderRef.current.resume();\n      startTimer();\n      setState(prev => ({ ...prev, isPaused: false }));\n    }\n  }, [startTimer]);\n\n  return {\n    state,\n    startRecording,\n    stopRecording,\n    pauseRecording,\n    resumeRecording,\n    previewStream,\n  };\n};\n"],"names":[],"mappings":";;;;AAAA;;AAkBO,MAAM,oBAAoB;IAC/B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAiB;QACjD,aAAa;QACb,UAAU;QACV,UAAU;QACV,OAAO;IACT;IAEA,MAAM,mBAAmB,IAAA,+MAAM,EAAuB;IACtD,MAAM,YAAY,IAAA,+MAAM,EAAS,EAAE;IACnC,MAAM,YAAY,IAAA,+MAAM,EAAqB;IAC7C,MAAM,WAAW,IAAA,+MAAM,EAAwB;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAqB;IAEvE,MAAM,aAAa,IAAA,oNAAW,EAAC;QAC7B,SAAS,OAAO,GAAG,YAAY;YAC7B,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,UAAU,KAAK,QAAQ,GAAG;gBAAE,CAAC;QAC5D,GAAG;IACL,GAAG,EAAE;IAEL,MAAM,YAAY,IAAA,oNAAW,EAAC;QAC5B,IAAI,SAAS,OAAO,EAAE;YACpB,cAAc,SAAS,OAAO;YAC9B,SAAS,OAAO,GAAG;QACrB;IACF,GAAG,EAAE;IAEL,MAAM,iBAAiB,IAAA,oNAAW,EAAC,OAAO;QACxC,IAAI;YACF,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,OAAO;oBAAM,UAAU;gBAAE,CAAC;YACvD,UAAU,OAAO,GAAG,EAAE;YAEtB,oBAAoB;YACpB,MAAM,eAAe,MAAM,UAAU,YAAY,CAAC,eAAe,CAAC;gBAChE,wEAAwE;gBACxE,yFAAyF;gBACzF,OAAO;oBACL,WAAW;wBAAE,OAAO;wBAAI,KAAK;oBAAG;gBAClC;gBACA,OAAO;YACT;YAEA,IAAI,iBAAiB;YAErB,gCAAgC;YAChC,IAAI,cAAc;gBAChB,IAAI;oBACF,MAAM,cAAc,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;wBAC5D,OAAO;4BACL,kBAAkB;4BAClB,kBAAkB;wBACpB;oBACF;oBAEA,iCAAiC;oBACjC,MAAM,SAAS;2BACV,aAAa,cAAc;2BAC3B,YAAY,cAAc;qBAC9B;oBACD,iBAAiB,IAAI,YAAY;gBACnC,EAAE,OAAO,UAAU;oBACjB,QAAQ,IAAI,CAAC,+BAA+B;gBAC9C;YACF;YAEA,UAAU,OAAO,GAAG;YACpB,iBAAiB;YAEjB,kDAAkD;YAClD,MAAM,oBAAoB;gBACxB;gBACA;gBACA;gBACA;gBACA,yBAA+B,eAAe;aAC/C;YAED,IAAI,mBAAmB;YACvB,KAAK,MAAM,QAAQ,kBAAmB;gBACpC,IAAI,cAAc,eAAe,CAAC,OAAO;oBACvC,mBAAmB;oBACnB,QAAQ,GAAG,CAAC,oBAAoB;oBAChC;gBACF;YACF;YAEA,yCAAyC;YACzC,IAAI,CAAC,cAAc,eAAe,CAAC,mBAAmB;gBACpD,mBAAmB;gBACnB,QAAQ,GAAG,CAAC;YACd;YAEA,QAAQ,GAAG,CAAC,6BAA6B;YAEzC,MAAM,gBAAgB,IAAI,cAAc,gBAAgB;gBACtD,UAAU;gBACV,oBAAoB;YACtB;YAEA,IAAI,YAAY;YAChB,cAAc,eAAe,GAAG,CAAC;gBAC/B,IAAI,MAAM,IAAI,IAAI,MAAM,IAAI,CAAC,IAAI,GAAG,GAAG;oBACrC,UAAU,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI;oBACjC,aAAa,MAAM,IAAI,CAAC,IAAI;oBAC5B,QAAQ,GAAG,CAAC,CAAC,gBAAgB,EAAE,MAAM,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,UAAU,cAAc,EAAE,MAAM,IAAI,CAAC,IAAI,EAAE;gBAC7G;YACF;YAEA,6BAA6B;YAC7B,aAAa,cAAc,EAAE,CAAC,EAAE,CAAC,OAAO,GAAG;gBACzC;YACF;YAEA,iBAAiB,OAAO,GAAG;YAC3B,cAAc,KAAK,CAAC,OAAO,uBAAuB;YAElD,4CAA4C;YAC3C,iBAAiB,OAAO,CAAS,SAAS,GAAG;YAE9C,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,aAAa;gBAAK,CAAC;YAChD;QACF,EAAE,OAAO,KAAK;YACZ,MAAM,QAAQ,eAAe,QAAQ,IAAI,OAAO,GAAG;YACnD,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE;gBAAM,CAAC;YACpC,QAAQ,KAAK,CAAC,oBAAoB;QACpC;IACF,GAAG;QAAC;KAAW;IAEf,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,OAAO,IAAI,QAAQ,CAAC;YAClB;YAEA,IAAI,CAAC,iBAAiB,OAAO,IAAI,iBAAiB,OAAO,CAAC,KAAK,KAAK,YAAY;gBAC9E,SAAS,CAAA,OAAQ,CAAC;wBAAE,GAAG,IAAI;wBAAE,aAAa;wBAAO,UAAU;oBAAM,CAAC;gBAClE,QAAQ;gBACR;YACF;YAEA,iBAAiB,OAAO,CAAC,MAAM,GAAG;gBAChC,QAAQ,GAAG,CAAC,CAAC,iCAAiC,EAAE,UAAU,OAAO,CAAC,MAAM,EAAE;gBAE1E,IAAI,UAAU,OAAO,CAAC,MAAM,KAAK,GAAG;oBAClC,QAAQ,KAAK,CAAC;oBACd,SAAS,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,OAAO;wBAAgD,CAAC;oBACrF,QAAQ;oBACR;gBACF;gBAEA,MAAM,mBAAmB,AAAC,iBAAiB,OAAO,CAAS,SAAS,IAAI;gBAExE,iCAAiC;gBACjC,MAAM,cAAc,UAAU,OAAO,CAAC,MAAM,CAAC,CAAA,QAAS,SAAS,MAAM,IAAI,GAAG;gBAC5E,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,YAAY,MAAM,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC,MAAM,EAAE;gBAE7E,IAAI,YAAY,MAAM,KAAK,GAAG;oBAC5B,QAAQ,KAAK,CAAC;oBACd,SAAS,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,OAAO;wBAAgD,CAAC;oBACrF,QAAQ;oBACR;gBACF;gBAEA,MAAM,OAAO,IAAI,KAAK,aAAa;oBAAE,MAAM;gBAAiB;gBAC5D,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,KAAK,IAAI,CAAC,cAAc,EAAE,KAAK,IAAI,CAAC,UAAU,EAAE,YAAY,MAAM,EAAE;gBAEjG,oBAAoB;gBACpB,IAAI,KAAK,IAAI,KAAK,GAAG;oBACnB,QAAQ,KAAK,CAAC;oBACd,SAAS,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,OAAO;wBAA+C,CAAC;oBACpF,QAAQ;oBACR;gBACF;gBAEA,oDAAoD;gBACpD,IAAI;oBACF,MAAM,UAAU,IAAI,eAAe,CAAC;oBACpC,QAAQ,GAAG,CAAC;oBACZ,IAAI,eAAe,CAAC;gBACtB,EAAE,OAAO,WAAW;oBAClB,QAAQ,KAAK,CAAC,2BAA2B;oBACzC,SAAS,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,OAAO;wBAAiD,CAAC;oBACtF,QAAQ;oBACR;gBACF;gBAEA,kBAAkB;gBAClB,UAAU,OAAO,EAAE,YAAY,QAAQ,CAAA,QAAS,MAAM,IAAI;gBAC1D,UAAU,OAAO,GAAG;gBACpB,iBAAiB;gBAEjB,SAAS,CAAA,OAAQ,CAAC;wBAAE,GAAG,IAAI;wBAAE,aAAa;wBAAO,UAAU;oBAAM,CAAC;gBAClE,QAAQ;YACV;YAEA,iBAAiB,OAAO,CAAC,IAAI;QAC/B;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,iBAAiB,IAAA,oNAAW,EAAC;QACjC,IAAI,iBAAiB,OAAO,EAAE,UAAU,aAAa;YACnD,iBAAiB,OAAO,CAAC,KAAK;YAC9B;YACA,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,UAAU;gBAAK,CAAC;QAC/C;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,kBAAkB,IAAA,oNAAW,EAAC;QAClC,IAAI,iBAAiB,OAAO,EAAE,UAAU,UAAU;YAChD,iBAAiB,OAAO,CAAC,MAAM;YAC/B;YACA,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,UAAU;gBAAM,CAAC;QAChD;IACF,GAAG;QAAC;KAAW;IAEf,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 2330, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rohit/OneDrive/Desktop/shareable-screen-studio/app/record/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Sparkles, ArrowRight } from 'lucide-react';\r\nimport { RecordingControls } from '@/components/RecordingControls';\r\nimport { VideoTrimmer } from '@/components/VideoTrimmer';\r\nimport { UploadShare } from '@/components/UploadShare';\r\nimport { useScreenRecorder } from '@/hooks/useScreenRecorder';\r\nimport { Button } from '@/components/ui/button';\r\nimport type { VideoRecord } from '@/lib/db';\r\nimport Link from 'next/link';\r\n\r\ntype Step = 'record' | 'trim' | 'upload' | 'done';\r\n\r\nexport default function RecordPage() {\r\n  const [step, setStep] = useState<Step>('record');\r\n  const [recordedBlob, setRecordedBlob] = useState<Blob | null>(null);\r\n  const [finalBlob, setFinalBlob] = useState<Blob | null>(null);\r\n  const [format, setFormat] = useState<'webm' | 'mp4'>('webm');\r\n  const [duration, setDuration] = useState(0);\r\n  const [trimStart, setTrimStart] = useState<number | undefined>(undefined);\r\n  const [trimEnd, setTrimEnd] = useState<number | undefined>(undefined);\r\n  const [completedVideo, setCompletedVideo] = useState<VideoRecord | null>(null);\r\n\r\n  const getBlobDurationSeconds = async (blob: Blob): Promise<number> => {\r\n    return await new Promise((resolve) => {\r\n      const url = URL.createObjectURL(blob);\r\n      const video = document.createElement('video');\r\n      video.preload = 'metadata';\r\n      video.src = url;\r\n      video.onloadedmetadata = () => {\r\n        const d = Number.isFinite(video.duration) ? video.duration : 0;\r\n        URL.revokeObjectURL(url);\r\n        resolve(d > 0 ? d : 0);\r\n      };\r\n      video.onerror = () => {\r\n        URL.revokeObjectURL(url);\r\n        resolve(0);\r\n      };\r\n    });\r\n  };\r\n\r\n  const {\r\n    state,\r\n    startRecording,\r\n    stopRecording,\r\n    pauseRecording,\r\n    resumeRecording,\r\n    previewStream,\r\n  } = useScreenRecorder();\r\n\r\n  useEffect(() => {\r\n    if (state.isRecording) {\r\n      setDuration(state.duration);\r\n    }\r\n  }, [state.duration, state.isRecording]);\r\n\r\n  const handleStop = async () => {\r\n    const blob = await stopRecording();\r\n    if (blob) {\r\n      setRecordedBlob(blob);\r\n      setTrimStart(undefined);\r\n      setTrimEnd(undefined);\r\n      setStep('trim');\r\n    }\r\n  };\r\n\r\n  const handleTrimComplete = (\r\n    trimmedBlob: Blob,\r\n    exportFormat: 'webm' | 'mp4',\r\n    start: number,\r\n    end: number\r\n  ) => {\r\n    setFinalBlob(trimmedBlob);\r\n    setFormat(exportFormat);\r\n    setTrimStart(start);\r\n    setTrimEnd(end);\r\n    setDuration(Math.max(0, end - start));\r\n    setStep('upload');\r\n  };\r\n\r\n  const handleSkipTrim = () => {\r\n    setFinalBlob(recordedBlob);\r\n    setFormat('webm');\r\n    setTrimStart(undefined);\r\n    setTrimEnd(undefined);\r\n    if (recordedBlob) {\r\n      getBlobDurationSeconds(recordedBlob).then((d) => {\r\n        if (d > 0) setDuration(d);\r\n      });\r\n    }\r\n    setStep('upload');\r\n  };\r\n\r\n  const handleUploadComplete = (video: VideoRecord) => {\r\n    setCompletedVideo(video);\r\n    setStep('done');\r\n  };\r\n\r\n  const handleNewRecording = () => {\r\n    setStep('record');\r\n    setRecordedBlob(null);\r\n    setFinalBlob(null);\r\n    setCompletedVideo(null);\r\n    setDuration(0);\r\n    setTrimStart(undefined);\r\n    setTrimEnd(undefined);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen\">\r\n      <header className=\"border-b border-border/50 bg-card/50 backdrop-blur-xl sticky top-0 z-50\">\r\n        <div className=\"container mx-auto px-4 py-4 flex items-center justify-between\">\r\n          <Link href=\"/\" className=\"flex items-center gap-2\">\r\n            <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-accent flex items-center justify-center text-primary-foreground font-bold\">\r\n              \r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold gradient-text\">Screen Studio</h1>\r\n              <p className=\"text-xs text-muted-foreground\">Record  Trim  Share</p>\r\n            </div>\r\n          </Link>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Link href=\"/videos\">\r\n              <Button variant=\"ghost\" size=\"sm\">\r\n                My Videos\r\n              </Button>\r\n            </Link>\r\n            <span className=\"text-sm text-muted-foreground\">MVP slice</span>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"container mx-auto px-4 py-8 max-w-4xl\">\r\n        {step === 'record' && !state.isRecording && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"text-center mb-12\"\r\n          >\r\n            <motion.div\r\n              animate={{ y: [0, -5, 0] }}\r\n              transition={{ duration: 3, repeat: Infinity }}\r\n              className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium mb-6\"\r\n            >\r\n              <Sparkles className=\"w-4 h-4\" />\r\n              Screen Recording Made Simple\r\n            </motion.div>\r\n            <h2 className=\"text-4xl md:text-5xl font-bold mb-4\">\r\n              Record, <span className=\"gradient-text\">Trim</span> & Share\r\n            </h2>\r\n            <p className=\"text-lg text-muted-foreground max-w-xl mx-auto\">\r\n              Capture your screen with audio, trim to perfection, and share with anyone in seconds.\r\n            </p>\r\n          </motion.div>\r\n        )}\r\n\r\n        <div className=\"flex items-center justify-center gap-2 mb-8\">\r\n          {['record', 'trim', 'upload', 'done'].map((s, i) => (\r\n            <motion.div\r\n              key={s}\r\n              className={`flex items-center gap-2 ${i < 3 ? 'flex-1 max-w-[100px]' : ''}`}\r\n            >\r\n              <motion.div\r\n                animate={{\r\n                  scale: step === s ? 1.1 : 1,\r\n                  backgroundColor: ['record', 'trim', 'upload', 'done'].indexOf(step) >= i\r\n                    ? 'hsl(var(--primary))'\r\n                    : 'hsl(var(--secondary))',\r\n                }}\r\n                className=\"w-3 h-3 rounded-full\"\r\n              />\r\n              {i < 3 && (\r\n                <div className={`flex-1 h-0.5 ${\r\n                  ['record', 'trim', 'upload', 'done'].indexOf(step) > i\r\n                    ? 'bg-primary'\r\n                    : 'bg-secondary'\r\n                }`} />\r\n              )}\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n\r\n        <AnimatePresence mode=\"wait\">\r\n          {step === 'record' && (\r\n            <motion.div\r\n              key=\"record\"\r\n              initial={{ opacity: 0, x: -20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              exit={{ opacity: 0, x: 20 }}\r\n              className=\"space-y-6\"\r\n            >\r\n              <div className=\"video-container\">\r\n                {previewStream ? (\r\n                  <video\r\n                    className=\"w-full aspect-video object-contain bg-black rounded-lg\"\r\n                    autoPlay\r\n                    muted\r\n                    playsInline\r\n                    ref={(node) => {\r\n                      if (node && previewStream) {\r\n                        node.srcObject = previewStream;\r\n                      }\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-full aspect-video rounded-lg bg-secondary flex items-center justify-center text-muted-foreground\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                        <svg className=\"w-8 h-8 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n                        </svg>\r\n                      </div>\r\n                      <p>Click \"Start Recording\" to begin</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <RecordingControls\r\n                isRecording={state.isRecording}\r\n                isPaused={state.isPaused}\r\n                duration={state.duration}\r\n                onStart={startRecording}\r\n                onStop={handleStop}\r\n                onPause={pauseRecording}\r\n                onResume={resumeRecording}\r\n              />\r\n              {state.error && (\r\n                <p className=\"text-center text-destructive text-sm\">{state.error}</p>\r\n              )}\r\n            </motion.div>\r\n          )}\r\n\r\n          {step === 'trim' && recordedBlob && (\r\n            <motion.div\r\n              key=\"trim\"\r\n              initial={{ opacity: 0, x: -20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              exit={{ opacity: 0, x: 20 }}\r\n            >\r\n              <VideoTrimmer\r\n                videoBlob={recordedBlob}\r\n                onTrimComplete={handleTrimComplete}\r\n                onSkip={handleSkipTrim}\r\n              />\r\n            </motion.div>\r\n          )}\r\n\r\n          {step === 'upload' && finalBlob && (\r\n            <motion.div\r\n              key=\"upload\"\r\n              initial={{ opacity: 0, x: -20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              exit={{ opacity: 0, x: 20 }}\r\n            >\r\n              <UploadShare\r\n                videoBlob={finalBlob}\r\n                format={format}\r\n                duration={duration}\r\n                trimStart={trimStart}\r\n                trimEnd={trimEnd}\r\n                onComplete={handleUploadComplete}\r\n              />\r\n            </motion.div>\r\n          )}\r\n\r\n          {step === 'done' && completedVideo && (\r\n            <motion.div\r\n              key=\"done\"\r\n              initial={{ opacity: 0, scale: 0.95 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              className=\"glass-card p-8 text-center\"\r\n            >\r\n              <motion.div\r\n                initial={{ scale: 0 }}\r\n                animate={{ scale: 1 }}\r\n                transition={{ type: 'spring', delay: 0.2 }}\r\n                className=\"w-20 h-20 rounded-full bg-success/20 flex items-center justify-center mx-auto mb-6\"\r\n              >\r\n                <svg\r\n                  className=\"w-10 h-10 text-success\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <motion.path\r\n                    initial={{ pathLength: 0 }}\r\n                    animate={{ pathLength: 1 }}\r\n                    transition={{ duration: 0.5, delay: 0.3 }}\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={3}\r\n                    d=\"M5 13l4 4L19 7\"\r\n                  />\r\n                </svg>\r\n              </motion.div>\r\n\r\n              <h2 className=\"text-2xl font-bold mb-2\">Video Ready!</h2>\r\n              <p className=\"text-muted-foreground mb-6\">\r\n                Your recording has been uploaded and is ready to share\r\n              </p>\r\n\r\n              <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n                <Button variant=\"secondary\" onClick={handleNewRecording}>\r\n                  New Recording\r\n                </Button>\r\n                <Link href={`/watch/${completedVideo.shareId}`}>\r\n                  <Button className=\"bg-primary hover:bg-primary/90\">\r\n                    View Video\r\n                    <ArrowRight className=\"w-4 h-4 ml-2\" />\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}